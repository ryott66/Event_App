# 🎯 イベントカウントダウンアプリ 要件定義 & DB設計

---

## ✅ アプリの目的

ユーザーが自由にイベントを登録し、それぞれのイベントページでカウントダウンを表示できるアプリ。  
画像やメモを追加し、ページのカスタマイズが可能。  
他のユーザーとの共有も可能で、共同編集できる仕組みも導入。

---

## 1. 要件定義

### ① ユーザーとマイページ
- プロフィール画像は不要。
- トップページ（マイページ）: 人生の「楽しみが見える」構成を目指す。
- 自分が作成・共有されたすべてのイベントを表示。
- カウントダウン、画像サムネイル、詳細ページへのリンクを表示。
- 表示順は基本「時系列順」だが、将来的に時間軸UIやビュー切替も導入予定。

### ② イベントの基本仕様
- イベントは複数作成可能。
- カウントダウンは「秒まで」表示。
- 繰り返し機能、非公開モードは初期実装では不要（URL共有されなければ非公開扱いとする）。

### ③ 共有機能
- ゲストは「共有URL（トークン）」さえあればログイン不要で閲覧可。
- トークンの有効期限や削除機能は将来的に拡張予定。
- アクセスログは不要。

### ④ イベントページのカスタマイズ
- 背景色・フォント・レイアウトなどを選べる。
- 自由なメモ欄あり（Markdown対応も将来的に）。
- 複数画像のアップロード、削除、並び替えに対応。

### ⑤ 閲覧と編集の権限
- 所有者以外のイベントの編集には専用パスワードが必要。
- 将来的に「閲覧のみ」「編集可能」などの権限分けも視野に。
- イベント詳細ページでは、共有メンバーの一覧を確認可能にする。

### ⑥ 画面構成（構想）
- **イントロページ**：アプリの紹介ページ。ログインなしで誰でも閲覧化。ログイン、新規登録に飛べる。
- **トップページ（マイページ）**：全イベントを一覧・時系列で表示。画像＋カウントダウン。
- **イベント詳細ページ**：カスタマイズされたイベントをゲストでも閲覧可。
- **編集ページ**：イベント内容（画像・メモ・カスタマイズなど）を編集。

---

## 2. DB設計（Djangoモデル構成）

### 🧑‍💼 User（Django標準モデル）

- `id`　（UUIDにオーバーライド）
- `username`
- `email`
- `password` など（Django authに準拠）

---

### 📅 Event

| フィールド名         | 型                      | 説明                            |
|----------------------|-------------------------|---------------------------------|
| `id`                 | UUID                    | 主キー                         |
| `owner`              | ForeignKey(User)        | 作成者                          |
| `title`              | CharField               | イベントタイトル                |
| `description`        | TextField               | 自由メモ欄                      |
| `datetime`               | DateField               | イベント日                      |
| `background_color`   | CharField               | 背景色（例: #ffffff）           |
| `font_style`         | CharField               | フォント指定（例: 'serif'）     |
| `layout_style`       | CharField               | レイアウトスタイル（例: 'simple'） |
| `end_message`       | TextField               | カウントダウン終了時の表示テキスト |
| `shared_with`        | ManyToManyField(User)   | 編集可能な共有ユーザー          |
| `share_token`        | CharField (unique)      | トークン付きURL共有用           |
| `share_password`     | CharField (nullable)    | 任意パスワード（簡易認証用）    |
| `created_at`         | DateTimeField           | 作成日時                         |
| `updated_at`         | DateTimeField           | 更新日時                         |

---

### 🖼️ EventImage

| フィールド名     | 型                      | 説明                          |
|------------------|-------------------------|-------------------------------|
| `event`          | ForeignKey(Event)       | 紐づくイベント                 |
| `image`          | ImageField              | 画像ファイル                   |
| `order`          | IntegerField            | 表示順序                       |
| `uploaded_at`    | DateTimeField           | アップロード日時               |

---

## 備考・今後の拡張余地

- 通知・リマインド機能は当面なし。
- `EventImage` は必要に応じて画像キャプションや表示設定も拡張可能。
- トップページのUIは将来的にタイムライン/グリッド表示など複数ビュー切替対応を想定。

---
